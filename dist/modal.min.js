!function(t,e){if("object"==typeof module&&"object"==typeof module.exports)module.exports=e(require("jquery"));else if("function"==typeof define&&define.amd)define(["jquery"],e);else{var i=t.modal,n=e(t.jQuery||t.$);n.noConflict=function(){return t.modal===n&&(t.modal=i),n},t.modal=n}}(this,function(u){var t=Object.prototype,e=Function.prototype,n=Object.getPrototypeOf,i=Array.isArray,o=t.toString,a=t.hasOwnProperty,s=e.toString,f={ie:!!(window.ActiveXObject||"ActiveXObject"in window)&&((navigator.userAgent.toLowerCase().match(/msie\s(\d+)/)||[])[1]||"11"),isObject:function(t){return!!t&&"object"==typeof t},isPlainObject:function(t){if(!t||"[object Object]"!==o.call(t))return!1;var e=n(t);if(null===e)return!0;var i=a.call(e,"constructor")&&e.constructor;return"function"==typeof i&&s.call(i)===s.call(Object)},isArray:i||function(t){return"[object Array]"===o.call(t)},isFunction:function(t){return"[object Function]"===o.call(t)||"function"==typeof t},isBoolean:function(t){return!0===t||!1===t||"[object Boolean]"===o.call(t)},isNumber:function(t){return"[object Number]"===o.call(t)},isString:function(t){return"[object String]"===o.call(t)},noop:function(){},queue:{},uniqueue:{},index:0,options:{zIndex:1e4,backdrop:.5,clickBackdropToClose:!1,skin:"",title:"信息",content:"",fixed:!0,size:"auto",maxWidth:!1,maxHeight:!1,padding:"20px",offset:"auto",icon:!1,btnClose:1,btns:[],btnsAlign:"right",okText:"确定",ok:null,cancelText:"取消",cancel:null,time:0,dragger:".ui-modal-head",canDragOut:!1,animate:"bounceIn",closeAnimate:"bounceOut"}},c=function(t){var e=this;e.index=++f.index,e.options=u.extend(!0,{},f.options,t),(t=e.options).zIndex=t.zIndex+e.index,f.isNumber(t.backdrop)?t.backdrop=[t.backdrop,"#000"]:f.isString(t.backdrop)&&(t.backdrop=[.5,t.backdrop]),f.isString(t.size)&&(t.size="auto"===t.size?["",""]:[t.size,""]),!t.title&&t.btnClose&&(t.btnClose=2);var i=[];f.isFunction(t.ok)&&i.push({text:t.okText,callback:t.ok}),f.isFunction(t.cancel)&&i.push({text:t.cancelText,callback:t.cancel}),t.btns=t.btns?i.concat(t.btns):i,e.render()};c.prototype.render=function(){var t=this,e=t.index,i=t.options,n=u("body");0===u("#ui-modal-shade").length&&n.append('<div id="ui-modal-shade" class="ui-modal-shade"></div>');var o=t.template();i.backdrop&&n.append(o[0]),n.append(o[1]),t.backdrop=i.backdrop?u("#ui-modal-backdrop"+e):null,t.dom=u("#ui-modal"+e),t.size(),t.offset(),t.handle();var a=function(){0<i.time&&setTimeout(function(){t.close()},i.time)};if(f.ie&&f.ie<10||!i.animate)a();else{var s="ui-modal-animate ui-modal-animate-"+i.animate;t.dom.addClass(s).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t.dom.removeClass(s),a()})}},c.prototype.template=function(){var t=this.index,e=this.options,i="";e.backdrop&&(i='<div id="ui-modal-backdrop'+t+'" class="ui-modal-backdrop" style="z-index: '+e.zIndex+"; opacity: "+e.backdrop[0]+"; background-color: "+e.backdrop[1]+';"></div>');var n="";if(n+='<div id="ui-modal'+t+'" class="ui-modal'+(e.skin?" "+e.skin:"")+'" style="z-index: '+e.zIndex+"; position: "+(e.fixed?"fixed":"absolute")+"; width: "+e.size[0]+"; height: "+e.size[1]+';">',e.title&&(f.isString(e.title)?n+='<div class="ui-modal-head">'+e.title+"</div>":f.isPlainObject(e.title)&&(n+='<div class="ui-modal-head" style="'+e.title.style+'">'+e.title.text+"</div>")),n+='<div class="ui-modal-body" style="padding: '+e.padding+';">',e.icon?(n+='<div class="ui-modal-content ui-modal-content-relative">',n+='<i class="ui-modal-icon ui-modal-icon-'+e.icon+'" />'):n+='<div class="ui-modal-content">',n+=e.content,n+="</div>",n+="</div>",e.btns&&0<e.btns.length){n+='<div class="ui-modal-foot" style="text-align: '+e.btnsAlign+';">';for(var o=0,a=e.btns.length;o<a;o++)n+='<b class="ui-modal-btn">'+e.btns[o].text+"</b>";n+="</div>"}return e.btnClose&&(n+='<b class="ui-modal-btn-close ui-modal-btn-close'+e.btnClose+'"></b>'),[i,n+="</div>"]},c.prototype.size=function(){var t=this,e=(t.index,t.options),n=t.dom;!e.size[0]&&0<e.maxWidth&&n.innerWidth()>e.maxWidth&&n.width(e.maxWidth);var o=n.innerHeight(),a=n.find(".ui-modal-head").outerHeight()||0,s=n.find(".ui-modal-foot").outerHeight()||0,i=function(){var t=n.find(".ui-modal-body"),e=parseFloat(t.css("padding-top")),i=parseFloat(t.css("padding-top"));t.height(o-a-s-e-i)};e.size[1]?i():0<e.maxHeight&&o>e.maxHeight&&(o=e.maxHeight,i())},c.prototype.offset=function(){var t=this.options,e=this.dom,i=u(window),n=e.outerWidth(),o=e.outerHeight(),a=(i.height()-o)/2,s=(i.width()-n)/2;f.isArray(t.offset)?(a=t.offset[0]||a,s=t.offset[1]||s):"auto"!==t.offset&&("top"===t.offset?a=0:"bottom"===t.offset?a=i.height()-o:"left"===t.offset?s=0:"right"===t.offset?s=i.width()-n:"top left"===t.offset?s=a=0:"top right"===t.offset?(a=0,s=i.width()-n):"bottom left"===t.offset?(a=i.height()-o,s=0):"bottom right"===t.offset?(a=i.height()-o,s=i.width()-n):a=t.offset),t.fixed||(a=i.scrollTop()+parseFloat(a),s=i.scrollLeft()+parseFloat(s)),e.css({top:a,left:s})},c.prototype.handle=function(){var i=this,n=i.index,c=i.options,t=i.backdrop,d=i.dom,e=d.find(c.dragger),l=u(window),o=u(document),r={};f.isFunction(c.success)&&c.success(n,d),l.on("resize",function(){i.offset()}),0<e.length&&(e.on("mousedown",function(t){r.dragging=!0,r.offset=[t.clientX-parseFloat(d.css("left")),t.clientY-parseFloat(d.css("top"))],u("#ui-modal-shade").show(),t.preventDefault()}),o.on("mousemove",function(t){if(r.dragging){var e=t.clientX-r.offset[0],i=t.clientY-r.offset[1];if(!c.canDragOut){var n=c.fixed?0:l.scrollLeft(),o=c.fixed?0:l.scrollTop(),a=l.width()-d.outerWidth()+n,s=l.height()-d.outerHeight()+o;e<n&&(e=n),a<e&&(e=a),i<o&&(i=o),s<i&&(i=s)}d.css({left:e,top:i}),t.preventDefault()}}),o.on("mouseup",function(t){r.dragging&&(delete r.dragging,delete r.offset,u("#ui-modal-shade").hide(),f.isFunction(c.dragEnd)&&c.dragEnd(n,d))})),t&&c.clickBackdropToClose&&t.on("click",function(){!1===(f.isFunction(c.cancel)?c.cancel(n,d):void 0)||i.close()}),c.btnClose&&d.on("click",".ui-modal-btn-close",function(){!1===(f.isFunction(c.cancel)?c.cancel(n,d):void 0)||i.close()}),c.btns&&0<c.btns.length&&d.on("click",".ui-modal-btn",function(){var t=u(this).index(),e=c.btns[t].callback;!1===(f.isFunction(e)?e(n,d):void 0)||i.close()})},c.prototype.close=function(){this.index;var t=this.options,e=this.backdrop,i=this.dom,n=function(){e&&e.remove(),i.remove(),f.isFunction(t.destroy)&&t.destroy()};if(f.ie&&f.ie<10||!t.closeAnimate)n();else{var o="ui-modal-animate ui-modal-animate-"+t.closeAnimate;i.addClass(o).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){i.removeClass(o),n()})}};var d={open:function(t){var e=t.id;if(e&&f.uniqueue[e])return f.uniqueue[e].index;var i=new c(t),n=i.index;t=i.options;return f.queue[n]=i,t.id&&(f.uniqueue[t.id]=i),n},close:function(t){var e=f.queue[t];if(e){t=e.index;var i=e.options;e.close(),delete f.queue[t],i.id&&delete f.uniqueue[i.id]}},closeAll:function(t){for(var e in f.queue){var i=f.queue[e];t&&i.options.type!==t||i.close()}},alert:function(t,e){var i={type:"alert",skin:"ui-modal-alert",maxWidth:360,ok:f.noop},n={};return f.isString(t)?n.content=t:f.isPlainObject(t)&&(n=t),f.isFunction(e)&&(n.ok=e),this.open(u.extend(!0,{},i,n))},confirm:function(t,e,i){var n={type:"confirm",skin:"ui-modal-confirm",maxWidth:360,ok:f.noop,cancel:f.noop},o={};return f.isString(t)?o.content=t:f.isPlainObject(t)&&(o=t),f.isFunction(e)&&(o.ok=e),f.isFunction(i)&&(o.cancel=i),this.open(u.extend(!0,{},n,o))},prompt:function(t,n,i){var e={type:"prompt",skin:"ui-modal-prompt",ok:f.noop,cancel:f.noop},o={};return f.isString(t)?o.title=t:f.isPlainObject(t)&&(o=t),o.value?(o.content='<input type="text" class="ui-modal-input" value="'+o.value+'" />',delete o.value):o.content='<input type="text" class="ui-modal-input" />',o.ok=function(t,e){var i=e.find(".ui-modal-input").val();return!f.isFunction(n)||n(i,t,e)},o.cancel=function(t,e){return!f.isFunction(i)||i(null,t,e)},this.open(u.extend(!0,{},e,o))},msg:function(t,e){this.closeAll("msg");var i={backdrop:!1,type:"msg",skin:"ui-modal-msg",title:!1,maxWidth:360,padding:"15px 20px",btnClose:!1,time:3e3,destroy:f.noop},n={};return f.isString(t)?n.content=t:f.isPlainObject(t)&&(n=t),f.isFunction(e)&&(n.destroy=e),this.open(u.extend(!0,{},i,n))},loading:function(t){var e={};return f.isString(t)?e.icon=t:f.isPlainObject(t)&&(e=t),e.icon?(e.content='<i class="ui-modal-svg ui-modal-svg-'+e.icon+'" />',delete e.icon):e.content='<i class="ui-modal-svg ui-modal-svg-bars" />',this.open(u.extend(!0,{},{backdrop:!1,type:"loading",skin:"ui-modal-loading",title:!1,padding:0,btnClose:!1,animate:"fadeIn",closeAnimate:"fadeOut"},e))}};return d});