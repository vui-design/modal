!function(t,o){if("object"==typeof module&&"object"==typeof module.exports)module.exports=o(require("jquery"));else if("function"==typeof define&&define.amd)define(["jquery"],o);else{var n=t.modal,e=o(t.jQuery||t.$);e.noConflict=function(){return t.modal===e&&(t.modal=n),e},t.modal=e}}(this,function(l){var t=Object.prototype,o=Function.prototype,e=Object.getPrototypeOf,n=Array.isArray,i=t.toString,a=t.hasOwnProperty,c=o.toString,s={isObject:function(t){return!!t&&"object"==typeof t},isPlainObject:function(t){if(!t||"[object Object]"!==i.call(t))return!1;var o=e(t);if(null===o)return!0;var n=a.call(o,"constructor")&&o.constructor;return"function"==typeof n&&c.call(n)===c.call(Object)},isArray:n||function(t){return"[object Array]"===i.call(t)},isFunction:function(t){return"[object Function]"===i.call(t)||"function"==typeof t},isBoolean:function(t){return!0===t||!1===t||"[object Boolean]"===i.call(t)},isNumber:function(t){return"[object Number]"===i.call(t)},isString:function(t){return"[object String]"===i.call(t)},noop:function(){},queue:{},uniqueue:{},index:0,options:{zIndex:1e4,backdrop:.5,clickBackdropToClose:!1,skin:"",title:"信息",content:"",fixed:!0,padding:"40px",offset:"auto",icon:!1,btnClose:!0,cancelText:"取消",cancel:null,okText:"确定",ok:null,time:0,animate:"bounceIn",closeAnimate:"bounceOut"}},d=function(t){var o=this;o.index=++s.index,o.options=l.extend(!0,{},s.options,t),(t=o.options).zIndex=t.zIndex+o.index,s.isNumber(t.backdrop)?t.backdrop=[t.backdrop,"#000"]:s.isString(t.backdrop)&&(t.backdrop=[.5,t.backdrop]),o.render()};d.prototype.render=function(){var t=this,o=t.index,n=t.options,e=l("body"),i=t.template();n.backdrop&&e.append(i[0]),e.append(i[1]),t.backdrop=n.backdrop?l("#ui-modal-backdrop"+o):null,t.dom=l("#ui-modal"+o),t.offset(),t.handle();var a=function(){0<n.time&&setTimeout(function(){t.close()},n.time)};if(n.animate){var c="ui-modal-animate ui-modal-animate-"+n.animate;t.dom.addClass(c).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t.dom.removeClass(c),a()})}else a()},d.prototype.template=function(){var t=this.index,o=this.options,n="";o.backdrop&&(n='<div id="ui-modal-backdrop'+t+'" class="ui-modal-backdrop" style="z-index: '+o.zIndex+"; opacity: "+o.backdrop[0]+"; background-color: "+o.backdrop[1]+';"></div>');var e="";return e+='<div id="ui-modal'+t+'" class="ui-modal'+(o.skin?" "+o.skin:"")+'" style="z-index: '+o.zIndex+"; position: "+(o.fixed?"fixed":"absolute")+';">',o.title&&(s.isString(o.title)?e+='<div class="ui-modal-head">'+o.title+"</div>":s.isPlainObject(o.title)&&(e+='<div class="ui-modal-head" style="'+o.title.style+'">'+o.title.text+"</div>")),e+='<div class="ui-modal-body" style="padding: '+o.padding+';">',e+='<div class="ui-modal-content">',o.icon&&(e+='<i class="ui-modal-icon ui-modal-icon-'+o.icon+'" />'),e+=o.content,e+="</div>",e+="</div>",(o.cancel||o.ok)&&(e+='<div class="ui-modal-foot">',o.cancel&&(e+='<button type="button" class="ui-modal-btn ui-modal-btn-cancel">'+o.cancelText+"</button>"),o.ok&&(e+='<button type="button" class="ui-modal-btn ui-modal-btn-ok">'+o.okText+"</button>"),e+="</div>"),o.btnClose&&(e+='<button type="button" class="ui-modal-btn-close"></button>'),[n,e+="</div>"]},d.prototype.offset=function(){var t=this.options,o=this.dom,n=l(window),e=o.outerWidth(),i=o.outerHeight(),a=(n.height()-i)/2,c=(n.width()-e)/2;s.isArray(t.offset)?(a=t.offset[0]||a,c=t.offset[1]||c):"auto"!==t.offset&&("top"===t.offset?a=0:"bottom"===t.offset?a=n.height()-i:"left"===t.offset?c=0:"right"===t.offset?c=n.width()-e:"top left"===t.offset?c=a=0:"top right"===t.offset?(a=0,c=n.width()-e):"bottom left"===t.offset?(a=n.height()-i,c=0):"bottom right"===t.offset?(a=n.height()-i,c=n.width()-e):a=t.offset),t.fixed||(a=n.scrollTop()+parseFloat(a),c=n.scrollLeft()+parseFloat(c)),o.css({top:a,left:c})},d.prototype.handle=function(){var t=this,o=t.index,n=t.options,e=t.backdrop,i=t.dom,a=(i.find(n.dragger),l(window));l(document);s.isFunction(n.success)&&n.success(o,i),a.on("resize",function(){t.offset()}),e&&n.clickBackdropToClose&&e.on("click",function(){!1===(s.isFunction(n.cancel)?n.cancel(o,i):void 0)||t.close()}),n.btnClose&&i.on("click",".ui-modal-btn-close",function(){!1===(s.isFunction(n.cancel)?n.cancel(o,i):void 0)||t.close()}),n.cancel&&i.on("click",".ui-modal-btn-cancel",function(){!1===(s.isFunction(n.cancel)?n.cancel(o,i):void 0)||t.close()}),n.ok&&i.on("click",".ui-modal-btn-ok",function(){!1===(s.isFunction(n.ok)?n.ok(o,i):void 0)||t.close()})},d.prototype.close=function(){this.index;var t=this.options,o=this.backdrop,n=this.dom,e=function(){o&&o.remove(),n.remove(),s.isFunction(t.destroy)&&t.destroy()};if(t.closeAnimate){var i="ui-modal-animate ui-modal-animate-"+t.closeAnimate;n.addClass(i).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){n.removeClass(i),e()})}else e()};var u={open:function(t){var o=t.id;if(o&&s.uniqueue[o])return s.uniqueue[o].index;var n=new d(t),e=n.index;t=n.options;return s.queue[e]=n,t.id&&(s.uniqueue[t.id]=n),e},close:function(t){var o=s.queue[t];if(o){t=o.index;var n=o.options;o.close(),delete s.queue[t],n.id&&delete s.uniqueue[n.id]}},closeAll:function(t){for(var o in s.queue){var n=s.queue[o];t&&n.options.type!==t||n.close()}},alert:function(t,o){var n={type:"alert",skin:"ui-modal-alert",padding:"40px 80px",btnClose:!1,ok:s.noop},e={};return s.isString(t)?e.content=t:s.isPlainObject(t)&&(e=t),s.isFunction(o)&&(e.ok=o),this.open(l.extend(!0,{},n,e))},confirm:function(t,o,n){var e={type:"confirm",skin:"ui-modal-confirm",padding:"40px 80px",btnClose:!1,ok:s.noop,cancel:s.noop},i={};return s.isString(t)?i.content=t:s.isPlainObject(t)&&(i=t),s.isFunction(o)&&(i.ok=o),s.isFunction(n)&&(i.cancel=n),this.open(l.extend(!0,{},e,i))},prompt:function(t,e,n){var o={type:"prompt",skin:"ui-modal-prompt",btnClose:!1,ok:s.noop,cancel:s.noop},i={};return s.isString(t)?i.title=t:s.isPlainObject(t)&&(i=t),i.value?(i.content='<input type="text" class="ui-modal-input" value="'+i.value+'" />',delete i.value):i.content='<input type="text" class="ui-modal-input" />',i.ok=function(t,o){var n=o.find(".ui-modal-input").val();return!s.isFunction(e)||e(n,t,o)},i.cancel=function(t,o){return!s.isFunction(n)||n(null,t,o)},this.open(l.extend(!0,{},o,i))},msg:function(t,o){this.closeAll("msg");var n={backdrop:!1,type:"msg",skin:"ui-modal-msg",title:!1,padding:"40px 60px",btnClose:!1,time:3e3,destroy:s.noop},e={};return s.isString(t)?e.content=t:s.isPlainObject(t)&&(e=t),s.isFunction(o)&&(e.destroy=o),this.open(l.extend(!0,{},n,e))},loading:function(t){var o={};return s.isString(t)?o.icon=t:s.isPlainObject(t)&&(o=t),o.icon?(o.content='<i class="ui-modal-svg ui-modal-svg-'+o.icon+'" />',delete o.icon):o.content='<i class="ui-modal-svg ui-modal-svg-bars" />',this.open(l.extend(!0,{},{backdrop:!1,type:"loading",skin:"ui-modal-loading",title:!1,padding:0,btnClose:!1,animate:"fadeIn",closeAnimate:"fadeOut"},o))}};return u});